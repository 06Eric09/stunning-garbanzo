# stunning-garbanzo/smart calendar

# 智能日历管理系统 - 代码说明书

## 1. 概述
这是一个基于Python Tkinter的智能日历管理系统，具有以下主要功能：
- 日历显示与事件管理
- 文本智能分析自动提取事件信息
- 跨平台文本选择监听功能
- 系统托盘支持
- 使用DeepSeek API进行自然语言处理

## 2. 主要组件

### 2.1 核心类

#### CalendarApp (主应用类)
- 功能：管理整个应用程序的界面和逻辑
- 主要方法：
  - `setup_ui()`: 初始化用户界面
  - `create_calendar()`: 创建日历视图
  - `analyze_text()`: 分析用户输入的文本
  - `parse_events()`: 解析API返回的事件数据

#### TextSelectionWatcher (文本选择监听器)
- 功能：监听用户在不同平台上的文本选择操作
- 平台特定实现：
  - Windows: 使用ctypes和剪贴板
  - macOS: 使用AppleScript
  - Linux: 使用xclip工具

### 2.2 数据管理
- 事件数据存储在JSON格式的日志文件中(`calendar_events.log`)
- API密钥存储在`api_key.json`中

## 3. 功能详解

### 3.1 日历功能
- 显示月视图日历
- 支持年份和月份切换
- 有事件的日期会以红色标记
- 点击日期显示当天所有事件

### 3.2 事件管理
- 添加事件：通过文本分析自动添加或手动输入
- 删除事件：支持删除单个事件或当天所有事件
- 事件详情查看：显示事件的时间、地点等信息

### 3.3 智能文本分析
- 使用DeepSeek API分析自然语言文本
- 自动提取事件的时间、地点和事项
- 支持多种时间表达方式(今天、明天、上午、下午等)
- 支持多项活动的识别

### 3.4 系统集成
- 系统托盘支持(Windows)
- 文本选择监听(跨平台)
- 响应缓存机制(避免重复分析相同文本)

## 4. 使用说明

### 4.1 启动应用
运行`main()`函数启动应用程序，会显示主窗口。

### 4.2 基本操作
1. 输入API密钥(首次使用时)
2. 在文本框中输入包含事件信息的自然语言文本
3. 点击"分析文本"按钮
4. 系统会自动提取事件并显示在日历中

### 4.3 高级功能
- **文本选择监听**：选中任何文本后，会弹出快捷菜单，可直接添加到日程
- **系统托盘**：最小化时会显示在系统托盘，可从中恢复或退出
- **事件管理**：可查看、删除单个事件或当天所有事件

这个系统结合了自然语言处理和传统GUI应用，提供了智能化的日历管理体验。
